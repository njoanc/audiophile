import{r,j as e,B as u,u as j,a as N,b as f,c as g}from"./index-CUqJ_sM4.js";import{u as y}from"./useDispatch-g-WFf2G1.js";const k=({onClose:a})=>{const[l,i]=r.useState(!1);r.useEffect(()=>{i(!0)},[]);function c(){i(!1),a()}return e.jsx("div",{className:`lg:hidden bg-pureWhite mobile-menu ${l?"active":"hidden"}`,children:e.jsxs("ul",{className:"pt-[84px] md:pt-[110px] flex flex-col md:flex-row md:justify-between gap-[100px] md:gap-[10px] md:max-w-[689px] mx-auto items-center lg:hidden pb-8",children:[e.jsx("li",{className:"",children:e.jsxs("div",{className:"relative flex flex-col gap-[22px] text-center bg-paleSilver rounded-lg px-[110px] md:px-[54px] pt-[88px] pb-[22px] mx-auto",children:[e.jsx("img",{className:"w-1/2 h-auto absolute top-[20px] left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:"/assets/shared/desktop/image-category-thumbnail-headphones.png",alt:"headphones"}),e.jsx("h6",{className:"text-mobileMenu",children:"HEADPHONES"}),e.jsx(u,{onClick:c,to:"/headphones"})]})}),e.jsx("li",{className:"",children:e.jsxs("div",{className:"relative flex flex-col gap-[22px] text-center bg-paleSilver rounded-lg px-[110px] md:px-[54px] pt-[88px] pb-[22px] mx-auto",children:[e.jsx("img",{className:"w-1/2 h-auto absolute top-[20px] left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:"/assets/shared/desktop/image-category-thumbnail-speakers.png",alt:"speakers"}),e.jsx("h6",{className:"text-mobileMenu",children:"SPEAKERS"}),e.jsx(u,{onClick:c,to:"/speakers"})]})}),e.jsx("li",{className:"",children:e.jsxs("div",{className:"relative flex flex-col gap-[22px] text-center bg-paleSilver rounded-lg px-[110px] md:px-[54px] pt-[88px] pb-[22px] mx-auto",children:[e.jsx("img",{className:"w-1/2 h-auto absolute top-[25px] left-1/2 transform -translate-x-1/2 -translate-y-1/2",src:"/assets/shared/desktop/image-category-thumbnail-earphones.png",alt:"earphones"}),e.jsx("h6",{className:"text-mobileMenu",children:"EARPHONES"}),e.jsx(u,{onClick:c,to:"/earphones"})]})})]})})},w=()=>{const a=j();return e.jsx("button",{className:"w-full bg-brightOrange hover:bg-brightOrangeHover transition-colors duration-300 uppercase text-subtitle text-pureWhite px-[30px] py-[15px]",whilehover:{scale:1},whiletap:{scale:.9},transition:{duration:.3},onClick:()=>a("./checkout"),children:"Checkout"})},C=({setCartItemCount:a})=>{const[l,i]=r.useState([]),c=y();r.useEffect(()=>{const s=JSON.parse(localStorage.getItem("cartItems"))||[];s.length>0&&i(s),a(s.length)},[]),r.useEffect(()=>{localStorage.setItem("cartItems",JSON.stringify(l)),a(l.length)},[l]);const b=()=>{c(N()),i([])},d=(s,n)=>{n===0?(c(f(s)),i(l.filter(t=>t.id!==s))):(c(g({id:s,quantity:n})),i(l.map(t=>t.id===s?{...t,quantity:n}:t)))},x=s=>{const n=l.find(t=>t.id===s);n&&(c(g({id:s,quantity:n.quantity+1})),i(l.map(t=>t.id===s?{...t,quantity:t.quantity+1}:t)))},h=s=>{const n=l.find(t=>t.id===s);n&&n.quantity>0&&(n.quantity===1?(c(f(s)),i(l.filter(t=>t.id!==s))):(c(g({id:s,quantity:n.quantity-1})),i(l.map(t=>t.id===s?{...t,quantity:t.quantity-1}:t))))},m=()=>{props.history.push({pathname:"/checkout",state:{cartItems:l}})},o=l.reduce((s,n)=>s+n.price*n.quantity,0);return e.jsx("div",{className:"relative",children:e.jsx("div",{className:"cart",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"cart-header flex justify-between mb-8",children:[e.jsxs("h2",{className:"cart-title text-h6",children:["Cart (",l.length,")"]}),e.jsx("button",{className:"underline text-body opacity-50",onClick:b,children:"Remove all"})]}),l.length>0?e.jsxs("div",{className:"cart-items flex flex-col gap-6",children:[l.map(s=>e.jsxs("div",{className:"cart-item flex justify-between gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"cart-item-image",children:e.jsx("img",{className:"rounded-lg max-w-[64px]",src:s.image.cart,alt:s.name})}),e.jsxs("div",{className:"cart-item-details",children:[e.jsx("h3",{className:"cart-item-title text-mobileMenu mb-1",children:s.name.replace(/(headphones|speaker|earphones)/i,"").replace(/(mark)/i,"MK").replace(/(wireless)/i,"").trim()}),e.jsxs("div",{className:"cart-item-price text-mobileMenu opacity-50",children:["$",s.price]})]})]}),e.jsx("div",{className:"flex justify-between gap-4 max-w-[96px]",children:e.jsxs("div",{className:"flex gap-[20px] place-items-center bg-paleSilver mx-auto px-2",children:[e.jsx("button",{type:"button",className:"opacity-25 py-2 focus:outline-none",onClick:()=>h(s.id),children:"-"}),e.jsx("input",{className:"bg-paleSilver py-2 w-4 text-center focus:outline-none text-subtitle",type:"number",min:"1",value:s.quantity,onChange:n=>d(s.id,parseInt(n.target.value))}),e.jsx("button",{type:"button",className:"opacity-25 py-2 focus:outline-none",onClick:()=>x(s.id),children:"+"})]})})]},s.id)),e.jsxs("div",{className:"cart-total flex justify-between",children:[e.jsx("span",{className:"uppercase opacity-50 text-body",children:"Total"}),e.jsxs("span",{className:"text-h6",children:["$",o.toFixed(2)]})]}),e.jsx("div",{className:"mb-8",children:e.jsx(w,{onClick:m})})]}):e.jsx("div",{className:"cart-empty text-center text-h6 mb-8",children:"Your cart is empty"})]})})})};function v({onClick:a}){return e.jsx("div",{children:e.jsx("div",{className:"fixed inset-0 bg-black opacity-40 z-40",onClick:a,initial:{opacity:0},animate:{opacity:.4},exit:{opacity:0}})})}const S=({onClick:a})=>e.jsx("button",{className:"lg:hidden",onClick:a,children:e.jsx("img",{src:"/assets/shared/mobile/hamburger.svg",alt:"menu"})}),p="hover:text-brightOrange transition-colors duration-300 uppercase";function M(){const a=j();return e.jsx("div",{children:e.jsxs("ul",{className:"hidden lg:flex gap-[34px]",children:[e.jsx("li",{onClick:()=>a("/"),className:p,children:"Home"}),e.jsx("li",{onClick:()=>a("/headphones"),className:p,children:"Headphones"}),e.jsx("li",{onClick:()=>a("/speakers"),className:p,children:"Speakers"}),e.jsx("li",{onClick:()=>a("/earphones"),className:p,children:"Earphones"})]})})}const O=({cartItemCount:a,setCartItemCount:l})=>{const[i,c]=r.useState(!1),[b,d]=r.useState(!1),[x,h]=r.useState(!1),m=j(),o=()=>{c(!i),d(!1)},s=()=>{h(!x)};return e.jsxs("div",{children:[e.jsxs("header",{className:"bg-pureBlack sticky top-0 z-50 md:px-4",children:[e.jsxs("nav",{className:"mx-auto text-pureWhite text-subtitle flex justify-between py-8 max-w-[310px] md:max-w-[689px] lg:max-w-[1109px] border-b border-b-white border-opacity-20",children:[e.jsx(S,{onClick:o}),e.jsx("img",{src:"/assets/shared/desktop/logo.svg",alt:"audiophile-logo",onClick:()=>m("/")}),e.jsx(M,{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{id:"shopping-cart",onClick:s,children:e.jsx("img",{src:"/assets/shared/desktop/icon-cart.svg",alt:"View shopping cart"})}),a>0&&e.jsx("div",{className:"items-cart absolute bg-red-600 top-0 right-0 translate-y-1/2 translate-x-1/2 rounded-full py-0 px-1",children:a})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:o}),e.jsx("div",{className:"fixed top-0 left-0 h-full opacity-100 w-full p-6 z-50",initial:{x:"-100vw"},animate:{x:0},exit:{x:"-100vw"},onClick:o,children:e.jsx(k,{})})]})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:s}),e.jsx(C,{cartItemCount:a,setCartItemCount:l})]})]})};export{O as default};
